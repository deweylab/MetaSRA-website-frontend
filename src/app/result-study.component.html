<div class="studybox">
  <div class="study-info">
    <span class="study-label">STUDY</span>
    <a [href]="'https://trace.ncbi.nlm.nih.gov/Traces/sra/?study=' +  study.study.id" target="_blank" class="study-id">{{ study.study.id }}</a><br>
    <a [href]="'https://trace.ncbi.nlm.nih.gov/Traces/sra/?study=' +  study.study.id" class="study-title">{{ study.study.title }}</a>
  </div>

  <div *ngIf="!sampleGroupsVisible" class="container-fluid sample-summary-row">
    <div class="row">
      <div class="col-lg-4 col-md-5 sample-count-col">
        <div class="sample-count-label" (click)="showSampleGroups()">
          <span class="sample-count">{{ study.sampleCount }}</span>
          {{ study.sampleCount > 1 ? 'matching samples' : 'matching sample' }}
        </div>
        <button
          (click)="showSampleGroups()"
          class="btn btn-lg show-samples-button">
          View sample metadata
        </button>
      </div>
      <div class="col-lg-8 col-md-7 study-terms-col">
        <term-tag *ngFor="let term of study.dterms" [term]="term" buttonClasses="btn-sm"></term-tag>
      </div>
    </div>
  </div>

  <div *ngIf="sampleGroupsVisible" class="container-fluid">
    <result-sample-group *ngFor="let sampleGroup of (study.sampleGroups | slice:0:(sampleGroupsExpanded ? undefined : INITIAL_SAMPLEGROUP_DISPLAY))" [sampleGroup]="sampleGroup"></result-sample-group>
    <a
      class="show-all-samples"
      *ngIf="study.sampleGroups.length > INITIAL_SAMPLEGROUP_DISPLAY && !sampleGroupsExpanded"
      (click)="expandSampleGroups()">
      (+) Show all <b>{{ study.sampleCount }}</b> matching samples for this study
    </a>
</div>
